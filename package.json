{
  "name": "claimpilot-cap-backend",
  "version": "0.1.0",
  "private": true,
  "description": "CAP Backend for ClaimPilot (KFZ) without Fiori Elements",
  "scripts": {
    "start": "cds-serve",
    "watch": "cds watch",
    "watch:hybrid": "cds watch --profile hybrid --port ",
    "watch:autoport": "cds watch --profile hybrid --port 0",
    "watch-claims": "cds watch --open claims/webapp/index.html?sap-ui-xx-viewCache=false",
    "deploy:pg": "powershell -NoProfile -ExecutionPolicy Bypass -File scripts/deploy-postgres.ps1",
    "deploy:pg:verify": "powershell -NoProfile -ExecutionPolicy Bypass -File scripts/deploy-postgres.ps1 -Verify -UseDocker",
    "test:chat": "node scripts/test-chat.js",
    "test:chat:raw": "node scripts/sse-debug.js",
    "test:formatting": "cds bind --exec -- node scripts\\analyse-agent-stream.js --auto-continue --out tmp\\agent-analysis.json --snapshot tmp\\agent-analysis-snapshot.json"
  },
  "dependencies": {
    "@cap-js/postgres": "^2.0.5",
    "@langchain/core": "^0.3.75",
    "@langchain/langgraph": "^0.4.9",
    "@langchain/langgraph-checkpoint": "^0.1.1",
    "@langchain/mcp-adapters": "^0.6.0",
    "@langchain/openai": "^0.3.17",
    "@modelcontextprotocol/sdk": "^1.17.5",
    "@sap-ai-sdk/langchain": "^1.14.0",
    "@sap-cloud-sdk/connectivity": "^3",
    "@sap-cloud-sdk/http-client": "^3",
    "@sap-cloud-sdk/resilience": "^3",
    "@sap/cds": "^9.3.1",
    "dotenv": "^16.6.1",
    "express": "^4.19.2",
    "openai": "^4.104.0"
  },
  "devDependencies": {
    "@cap-js/sqlite": "^1.11.1",
    "@sap/cds-dk": "^9.3.2",
    "sqlite3": "^5.1.7"
  },
  "cds": {
    "odata": {
      "version": "v4"
    },
    "features": {
      "odata_new_parser": true
    },
    "requires": {
      "db": {
        "kind": "postgres",
        "impl": "@cap-js/postgres",
        "credentials": {
          "host": "{env.POSTGRES_HOST}",
          "port": "{env.POSTGRES_PORT}",
          "database": "{env.POSTGRES_DATABASE}",
          "user": "{env.POSTGRES_USER}",
          "password": "{env.POSTGRES_PASSWORD}",
          "schema": "public"
        },
        "pool": {
          "acquireTimeoutMillis": 10000,
          "destroyTimeoutMillis": 2000,
          "min": 0,
          "max": 10
        },
        "client": {
          "connectionTimeoutMillis": 10000,
          "connectionString": "{env.DATABASE_URL}"
        }
      }
    },
    "sql": {
      "dialect": "postgres"
    },
    "[hybrid]": {
      "requires": {
        "db": {
          "kind": "postgres",
          "impl": "@cap-js/postgres",
          "credentials": {
            "url": "{env.DATABASE_URL}",
            "schema": "public"
          }
        }
      },
      "sql": {
        "dialect": "postgres"
      }
    },
    "server": {
      "port": 9999
    }
  },
  "sapux": [
    "app/claims"
  ],
  "volta": {
    "node": "22.19.0"
  }
}
