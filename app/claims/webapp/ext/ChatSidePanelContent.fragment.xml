<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns:html="http://www.w3.org/1999/xhtml">

    <VBox width="100%" height="100%" class="cpChatSidePanel" renderType="Bare">
        <Toolbar>
            <Title text="PureAI"/>
        </Toolbar>

        <ScrollContainer id="chatHistoryScrollContainerInSidePanel" width="100%" height="100%" vertical="true">
            <VBox width="100%">
                <List
                    id="chatHistoryList"
                    items="{chat>/chatHistory}"
                    width="100%"
                    inset="false"
                    showSeparators="None">
                    <CustomListItem>
                        <HBox width="100%" justifyContent="{= ${chat>type} === 'user' ? 'End' : 'Start'}">
                            <FormattedText
                                htmlText="{chat>text}"
                                class="{= ${chat>type} === 'user' ? 'cp-bubble cp-user' : 'cp-bubble cp-assistant'}"/>
                        </HBox>
                    </CustomListItem>
                </List>
            </VBox>
        </ScrollContainer>

        <HBox class="modernInputRow" alignItems="End">
            <VBox width="100%">
                <TextArea
                    id="chatInputField"
                    value="{chat>/userInput}"
                    placeholder="Nachricht an PureAI..."
                    rows="3"
                    width="100%"
                    growing="true"
                    growingMaxLines="6"/>
            </VBox>
            <Button
                id="sendButton"
                icon="sap-icon://paper-plane"
                type="Emphasized"
                press="onSendChatMessageInSidePanel"/>
        </HBox>
    </VBox>

</core:FragmentDefinition>
